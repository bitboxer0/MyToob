# Story 1.2.1: SwiftLint Technical Debt Resolution

## Status
Draft

## Story
**As a** developer,
**I want** to re-enable temporarily disabled SwiftLint rules and fix the violations,
**so that** code quality standards are fully enforced across the codebase.

## Acceptance Criteria
1. All source files have consistent file headers matching the required pattern
2. `file_header` rule re-enabled in `.swiftlint.yml`
3. `multiline_arguments` violations fixed in test files
4. `multiline_arguments` rule re-enabled
5. `implicitly_unwrapped_optional` violations reviewed and fixed or documented
6. `implicitly_unwrapped_optional` rule re-enabled or exceptions documented
7. `attributes` rule configured to work with SwiftData `@Attribute` macro
8. `attributes` rule re-enabled with appropriate exclusions
9. SwiftLint passes with `--strict` flag (0 violations)
10. CI pipeline continues to pass

## Tasks / Subtasks
- [ ] Add consistent file headers (AC: 1, 2)
  - [ ] Define standard file header template
  - [ ] Add headers to all source files in MyToob/
  - [ ] Add headers to all test files in MyToobTests/
  - [ ] Add headers to all UI test files in MyToobUITests/
  - [ ] Re-enable `file_header` rule in `.swiftlint.yml`
  - [ ] Verify SwiftLint passes
- [ ] Fix multiline_arguments violations (AC: 3, 4)
  - [ ] Review and fix violations in test files
  - [ ] Re-enable `multiline_arguments` rule in `.swiftlint.yml`
  - [ ] Verify SwiftLint passes
- [ ] Review implicitly_unwrapped_optional usage (AC: 5, 6)
  - [ ] Audit XCTest setup patterns using implicitly unwrapped optionals
  - [ ] Determine if exceptions are justified for XCTest setup
  - [ ] Either fix violations or add exclusions for test files
  - [ ] Re-enable rule or document exceptions in `.swiftlint.yml`
  - [ ] Verify SwiftLint passes
- [ ] Configure attributes rule for SwiftData (AC: 7, 8)
  - [ ] Research SwiftLint attributes rule configuration
  - [ ] Configure rule to allow SwiftData `@Attribute` on same line
  - [ ] Re-enable `attributes` rule with configuration
  - [ ] Verify SwiftLint passes on SwiftData models
- [ ] Final validation (AC: 9, 10)
  - [ ] Run `swiftlint lint --strict` locally
  - [ ] Verify 0 violations
  - [ ] Push to GitHub and verify CI pipeline passes
  - [ ] Document any remaining exceptions in CLAUDE.md

## Dev Notes

### Technical Debt Context
This story was created during Story 1.3 (GitHub CI/CD Pipeline) implementation. To achieve a passing CI pipeline, four SwiftLint opt-in rules were temporarily disabled:

1. **file_header** - 10+ files missing consistent headers
2. **multiline_arguments** - Test files had violations
3. **implicitly_unwrapped_optional** - Standard XCTest pattern uses `var app: XCUIApplication!`
4. **attributes** - Conflicts with SwiftData `@Attribute` macro placement

Additionally, the `inclusive_language` rule was disabled because `ChannelBlacklist` is a technical term for content blocking.

### File Header Template
The current `.swiftlint.yml` specifies this pattern:
```
//
// .*?\.swift
// MyToob
//
// Created by .* on \d{1,2}/\d{1,2}/\d{2,4}\.
//
```

Example:
```swift
//
//  VideoItem.swift
//  MyToob
//
//  Created by Claude Code (BMad Master) on 11/17/25.
//
```

### SwiftData @Attribute Conflict
The `attributes` rule wants attributes on separate lines:
```swift
// SwiftLint wants:
@Attribute(.unique)
var videoID: String?

// SwiftData pattern (current):
@Attribute(.unique) var videoID: String?
```

Need to research if SwiftLint can be configured to allow inline attributes for specific attribute names like `@Attribute`.

### XCTest Implicitly Unwrapped Optional Pattern
Standard XCTest pattern:
```swift
class MyUITests: XCTestCase {
  var app: XCUIApplication!

  override func setUpWithError() throws {
    app = XCUIApplication()
  }
}
```

This is idiomatic XCTest setup. May warrant exclusion pattern for test files rather than refactoring.

## Testing

### Testing Requirements for This Story
- All SwiftLint rules enabled
- SwiftLint passes with `--strict` flag locally
- CI pipeline passes with all rules enabled
- No reduction in code quality or compliance

### Validation Steps
1. Run `swiftlint lint --strict` locally
2. Verify 0 violations
3. Commit changes
4. Verify CI pipeline passes
5. Review SwiftLint output in GitHub Actions

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-19 | 1.0 | Created to track SwiftLint technical debt from Story 1.3 | Dev Agent (James) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
