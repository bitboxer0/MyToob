# Story 1.1: Xcode Project Setup & Configuration

## Status
Draft

## Story
**As a** developer,
**I want** a properly configured Xcode project with target settings, entitlements, and build configurations,
**so that** I can develop a sandboxed macOS app with correct signing and capabilities.

## Acceptance Criteria
1. Xcode project created for macOS target with minimum deployment target macOS 14.0 (Sonoma)
2. App sandbox enabled with entitlements: `com.apple.security.network.client`, `com.apple.security.files.user-selected.read-write`
3. Signing configured for development and distribution (code signing identity, provisioning profiles)
4. Build configurations created: Debug, Release, TestFlight
5. App group configured for shared data access (if needed for extensions in future)
6. Info.plist includes required keys: LSMinimumSystemVersion, NSHumanReadableCopyright, etc.
7. Core ML embedding model (`sentence-transformer-384.mlpackage`) added to `MyToob/Resources/CoreML Models/` directory
8. Project builds successfully and launches with empty window

## Tasks / Subtasks
- [ ] Create Xcode project for macOS app (AC: 1)
  - [ ] Set minimum deployment target to macOS 14.0
  - [ ] Configure app bundle identifier
  - [ ] Set initial version to 1.0.0
- [ ] Configure App Sandbox and entitlements (AC: 2, 5)
  - [ ] Enable App Sandbox in target capabilities
  - [ ] Add `com.apple.security.network.client` entitlement
  - [ ] Add `com.apple.security.files.user-selected.read-write` entitlement
  - [ ] Configure app group (e.g., `group.com.yourcompany.mytoob`)
- [ ] Setup code signing (AC: 3)
  - [ ] Configure development signing identity
  - [ ] Configure distribution signing identity
  - [ ] Setup provisioning profiles for development and distribution
- [ ] Create build configurations (AC: 4)
  - [ ] Configure Debug build configuration
  - [ ] Configure Release build configuration
  - [ ] Configure TestFlight build configuration
  - [ ] Set appropriate optimization levels for each configuration
- [ ] Configure Info.plist (AC: 6)
  - [ ] Add LSMinimumSystemVersion key (14.0)
  - [ ] Add NSHumanReadableCopyright
  - [ ] Add CFBundleDisplayName
  - [ ] Add other required metadata keys
- [ ] Add Core ML model to project (AC: 7)
  - [ ] Create directory structure: `MyToob/Resources/CoreML Models/`
  - [ ] Add `sentence-transformer-384.mlpackage` to project
  - [ ] Verify model is included in target membership
  - [ ] Configure model as resource in build phases
- [ ] Verify project builds and launches (AC: 8)
  - [ ] Build project in Debug configuration
  - [ ] Launch app and verify empty window appears
  - [ ] Verify no build errors or warnings

## Dev Notes

### Project Structure
[Source: architecture/unified-project-structure.md]
- Project root: `MyToob/`
- Main app target: `MyToob/`
- Resources directory: `MyToob/Resources/`
- Core ML models location: `MyToob/Resources/CoreML Models/`

### Tech Stack Requirements
[Source: architecture/tech-stack.md]
- **Language:** Swift 5.10+
- **UI Framework:** SwiftUI (macOS 14+)
- **AI/ML Framework:** Core ML
- **Security:** Keychain Services (hardware-backed encryption, sandbox-compliant)

### Build Configuration Requirements
[Source: architecture/deployment-architecture.md]
- **Debug:** Development with debugging symbols
- **Release:** Optimized for App Store and DMG distribution
- **TestFlight:** Beta testing configuration

### Entitlements Required
[Source: architecture/deployment-architecture.md]
- App Sandbox: Required for App Store distribution
- Network Client: Required for YouTube API calls
- User Selected Files (Read/Write): Required for local video file access

### Code Signing Strategy
[Source: architecture/deployment-architecture.md]
- **Development:** Local development certificate
- **App Store:** App Store distribution certificate + provisioning profile
- **DMG (Direct Download):** Developer ID Application certificate

### Core ML Model Details
[Source: architecture/tech-stack.md]
- **Model:** sentence-transformer-384.mlpackage
- **Framework:** Core ML
- **Purpose:** On-device embeddings for video semantic search
- **Optimization:** Quantized models, optimized for Apple Silicon

### Project Structure Guidance
Based on the unified project structure, the Xcode project should be organized as:
```
MyToob/
├── MyToob/                     # Main app target
│   ├── MyToobApp.swift         # @main entry point
│   ├── Info.plist              # App metadata
│   ├── App/                    # App-level views
│   ├── Features/               # Feature modules
│   ├── Core/                   # Core services and models
│   ├── Resources/              # Assets and resources
│   │   ├── Assets.xcassets/
│   │   └── CoreML Models/      # ML models location
│   └── Views/                  # UI components
├── MyToobTests/                # Unit tests
└── MyToobUITests/              # UI tests
```

## Testing

### Testing Standards
[Source: architecture/testing-strategy.md]
- **Test Location:** `MyToobTests/` for unit tests
- **Test Framework:** XCTest (native Xcode framework)
- **Test Organization:** Tests organized by category (Models, Services, etc.)

### Testing Requirements for This Story
- Build test: Verify project builds successfully in all configurations (Debug, Release, TestFlight)
- Launch test: Verify app launches without crashes
- Entitlements test: Verify app sandbox and entitlements are correctly configured
- Core ML model test: Verify Core ML model is accessible and loadable

### Manual Verification Steps
1. Build project in Xcode (⌘B)
2. Run project (⌘R) and verify window appears
3. Check Build Settings for entitlements
4. Verify Core ML model is in bundle resources
5. Check code signing settings in project navigator

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-17 | 1.0 | Initial story creation | Scrum Master (Bob) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
