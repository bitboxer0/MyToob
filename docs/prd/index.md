# MyToob Product Requirements Document (PRD)

## Table of Contents

- [MyToob Product Requirements Document (PRD)](#table-of-contents)
  - [Goals and Background Context](./goals-and-background-context.md)
    - [Goals](./goals-and-background-context.md#goals)
    - [Background Context](./goals-and-background-context.md#background-context)
    - [Change Log](./goals-and-background-context.md#change-log)
  - [Requirements](./requirements.md)
    - [Functional Requirements](./requirements.md#functional-requirements)
    - [Non-Functional Requirements](./requirements.md#non-functional-requirements)
  - [User Interface Design Goals](./user-interface-design-goals.md)
    - [Overall UX Vision](./user-interface-design-goals.md#overall-ux-vision)
    - [Key Interaction Paradigms](./user-interface-design-goals.md#key-interaction-paradigms)
    - [Core Screens and Views](./user-interface-design-goals.md#core-screens-and-views)
    - [Accessibility](./user-interface-design-goals.md#accessibility)
    - [Branding](./user-interface-design-goals.md#branding)
    - [Target Device and Platforms](./user-interface-design-goals.md#target-device-and-platforms)
  - [Technical Assumptions](./technical-assumptions.md)
    - [Repository Structure: Monorepo](./technical-assumptions.md#repository-structure-monorepo)
    - [Service Architecture](./technical-assumptions.md#service-architecture)
    - [Testing Requirements](./technical-assumptions.md#testing-requirements)
    - [Additional Technical Assumptions and Requests](./technical-assumptions.md#additional-technical-assumptions-and-requests)
  - [Epic List](./epic-list.md)
  - [Epic 1: Foundation & Project Infrastructure](./epic-1-foundation-project-infrastructure.md)
    - [Story 1.1: Xcode Project Setup & Configuration](./epic-1-foundation-project-infrastructure.md#story-11-xcode-project-setup-configuration)
    - [Story 1.2: SwiftLint & Code Quality Tooling](./epic-1-foundation-project-infrastructure.md#story-12-swiftlint-code-quality-tooling)
    - [Story 1.3: GitHub CI/CD Pipeline](./epic-1-foundation-project-infrastructure.md#story-13-github-cicd-pipeline)
    - [Story 1.4: SwiftData Core Models](./epic-1-foundation-project-infrastructure.md#story-14-swiftdata-core-models)
    - [Story 1.5: Basic App Shell & Navigation](./epic-1-foundation-project-infrastructure.md#story-15-basic-app-shell-navigation)
    - [Story 1.6: Logging & Diagnostics Framework](./epic-1-foundation-project-infrastructure.md#story-16-logging-diagnostics-framework)
  - [Epic 2: YouTube OAuth & Data API Integration](./epic-2-youtube-oauth-data-api-integration.md)
    - [Story 2.1: Google OAuth Authentication Flow](./epic-2-youtube-oauth-data-api-integration.md#story-21-google-oauth-authentication-flow)
    - [Story 2.2: Token Storage & Automatic Refresh](./epic-2-youtube-oauth-data-api-integration.md#story-22-token-storage-automatic-refresh)
    - [Story 2.3: YouTube Data API Client Foundation](./epic-2-youtube-oauth-data-api-integration.md#story-23-youtube-data-api-client-foundation)
    - [Story 2.4: ETag-Based Caching for Metadata](./epic-2-youtube-oauth-data-api-integration.md#story-24-etag-based-caching-for-metadata)
    - [Story 2.5: API Quota Budgeting & Circuit Breaker](./epic-2-youtube-oauth-data-api-integration.md#story-25-api-quota-budgeting-circuit-breaker)
    - [Story 2.6: Import User Subscriptions](./epic-2-youtube-oauth-data-api-integration.md#story-26-import-user-subscriptions)
  - [Epic 3: Compliant YouTube Playback](./epic-3-compliant-youtube-playback.md)
    - [Story 3.1: WKWebView YouTube IFrame Player Setup](./epic-3-compliant-youtube-playback.md#story-31-wkwebview-youtube-iframe-player-setup)
    - [Story 3.2: JavaScript Bridge for Playback Control](./epic-3-compliant-youtube-playback.md#story-32-javascript-bridge-for-playback-control)
    - [Story 3.3: Player State & Time Event Handling](./epic-3-compliant-youtube-playback.md#story-33-player-state-time-event-handling)
    - [Story 3.4: Picture-in-Picture Support (Native Only)](./epic-3-compliant-youtube-playback.md#story-34-picture-in-picture-support-native-only)
    - [Story 3.5: Player Visibility Enforcement (Compliance)](./epic-3-compliant-youtube-playback.md#story-35-player-visibility-enforcement-compliance)
    - [Story 3.6: Error Handling & Unsupported Videos](./epic-3-compliant-youtube-playback.md#story-36-error-handling-unsupported-videos)
  - [Epic 4: Focus Mode & Distraction Management](./epic-4-focus-mode-distraction-management.md)
    - [Story 4.1: Focus Mode Global Toggle](./epic-4-focus-mode-distraction-management.md#story-41-focus-mode-global-toggle)
    - [Story 4.2: Hide YouTube Sidebar](./epic-4-focus-mode-distraction-management.md#story-42-hide-youtube-sidebar)
    - [Story 4.3: Hide Related Videos Panel](./epic-4-focus-mode-distraction-management.md#story-43-hide-related-videos-panel)
    - [Story 4.4: Hide Comments Section](./epic-4-focus-mode-distraction-management.md#story-44-hide-comments-section)
    - [Story 4.5: Hide Homepage Feed](./epic-4-focus-mode-distraction-management.md#story-45-hide-homepage-feed)
    - [Story 4.6: Focus Mode Scheduling (Pro Feature)](./epic-4-focus-mode-distraction-management.md#story-46-focus-mode-scheduling-pro-feature)
    - [Story 4.7: Distraction Hiding Presets](./epic-4-focus-mode-distraction-management.md#story-47-distraction-hiding-presets)
  - [Epic 5: Local File Playback & Management](./epic-5-local-file-playback-management.md)
    - [Story 5.1: Local File Import via File Picker](./epic-5-local-file-playback-management.md#story-51-local-file-import-via-file-picker)
    - [Story 5.2: Security-Scoped Bookmarks for Persistent Access](./epic-5-local-file-playback-management.md#story-52-security-scoped-bookmarks-for-persistent-access)
    - [Story 5.3: AVPlayerView Integration for Local Playback](./epic-5-local-file-playback-management.md#story-53-avplayerview-integration-for-local-playback)
    - [Story 5.4: Playback State Persistence for Local Files](./epic-5-local-file-playback-management.md#story-54-playback-state-persistence-for-local-files)
    - [Story 5.5: Drag-and-Drop File Import](./epic-5-local-file-playback-management.md#story-55-drag-and-drop-file-import)
    - [Story 5.6: Local File Metadata Extraction](./epic-5-local-file-playback-management.md#story-56-local-file-metadata-extraction)
  - [Epic 6: Data Persistence & CloudKit Sync](./epic-6-data-persistence-cloudkit-sync.md)
    - [Story 6.1: SwiftData Model Container & Configuration](./epic-6-data-persistence-cloudkit-sync.md#story-61-swiftdata-model-container-configuration)
    - [Story 6.2: Versioned Schema Migrations](./epic-6-data-persistence-cloudkit-sync.md#story-62-versioned-schema-migrations)
    - [Story 6.3: CloudKit Container & Private Database Setup](./epic-6-data-persistence-cloudkit-sync.md#story-63-cloudkit-container-private-database-setup)
    - [Story 6.4: CloudKit Sync Conflict Resolution](./epic-6-data-persistence-cloudkit-sync.md#story-64-cloudkit-sync-conflict-resolution)
    - [Story 6.5: Sync Status UI & User Controls](./epic-6-data-persistence-cloudkit-sync.md#story-65-sync-status-ui-user-controls)
    - [Story 6.6: Caching Strategy for Metadata & Thumbnails](./epic-6-data-persistence-cloudkit-sync.md#story-66-caching-strategy-for-metadata-thumbnails)
  - [Epic 7: On-Device AI Embeddings & Vector Index](./epic-7-on-device-ai-embeddings-vector-index.md)
    - [Story 7.1: Core ML Embedding Model Integration](./epic-7-on-device-ai-embeddings-vector-index.md#story-71-core-ml-embedding-model-integration)
    - [Story 7.2: Metadata Text Preparation for Embeddings](./epic-7-on-device-ai-embeddings-vector-index.md#story-72-metadata-text-preparation-for-embeddings)
    - [Story 7.3: Thumbnail OCR Text Extraction](./epic-7-on-device-ai-embeddings-vector-index.md#story-73-thumbnail-ocr-text-extraction)
    - [Story 7.4: Batch Embedding Generation Pipeline](./epic-7-on-device-ai-embeddings-vector-index.md#story-74-batch-embedding-generation-pipeline)
    - [Story 7.5: HNSW Vector Index Construction](./epic-7-on-device-ai-embeddings-vector-index.md#story-75-hnsw-vector-index-construction)
    - [Story 7.6: Vector Similarity Search API](./epic-7-on-device-ai-embeddings-vector-index.md#story-76-vector-similarity-search-api)
  - [Epic 8: AI Clustering & Auto-Collections](./epic-8-ai-clustering-auto-collections.md)
    - [Story 8.1: kNN Graph Construction from Embeddings](./epic-8-ai-clustering-auto-collections.md#story-81-knn-graph-construction-from-embeddings)
    - [Story 8.2: Leiden Community Detection Algorithm](./epic-8-ai-clustering-auto-collections.md#story-82-leiden-community-detection-algorithm)
    - [Story 8.3: Cluster Centroid Computation & Label Generation](./epic-8-ai-clustering-auto-collections.md#story-83-cluster-centroid-computation-label-generation)
    - [Story 8.4: Auto-Collections UI in Sidebar](./epic-8-ai-clustering-auto-collections.md#story-84-auto-collections-ui-in-sidebar)
    - [Story 8.5: Cluster Stability & Re-Clustering Trigger](./epic-8-ai-clustering-auto-collections.md#story-85-cluster-stability-re-clustering-trigger)
    - [Story 8.6: Cluster Detail View & Refinement](./epic-8-ai-clustering-auto-collections.md#story-86-cluster-detail-view-refinement)
  - [Epic 9: Hybrid Search & Discovery UX](./epic-9-hybrid-search-discovery-ux.md)
    - [Story 9.1: Search Bar & Query Input](./epic-9-hybrid-search-discovery-ux.md#story-91-search-bar-query-input)
    - [Story 9.2: Keyword Search Implementation](./epic-9-hybrid-search-discovery-ux.md#story-92-keyword-search-implementation)
    - [Story 9.3: Vector Similarity Search Integration](./epic-9-hybrid-search-discovery-ux.md#story-93-vector-similarity-search-integration)
    - [Story 9.4: Hybrid Search Result Fusion](./epic-9-hybrid-search-discovery-ux.md#story-94-hybrid-search-result-fusion)
    - [Story 9.5: Filter Pills for Faceted Search](./epic-9-hybrid-search-discovery-ux.md#story-95-filter-pills-for-faceted-search)
    - [Story 9.6: Search Results Display & Ranking](./epic-9-hybrid-search-discovery-ux.md#story-96-search-results-display-ranking)
  - [Epic 10: Collections & Organization](./epic-10-collections-organization.md)
    - [Story 10.1: Create & Manage Collections](./epic-10-collections-organization.md#story-101-create-manage-collections)
    - [Story 10.2: Add Videos to Collections](./epic-10-collections-organization.md#story-102-add-videos-to-collections)
    - [Story 10.3: Collection Detail View](./epic-10-collections-organization.md#story-103-collection-detail-view)
    - [Story 10.4: Collection Export to Markdown](./epic-10-collections-organization.md#story-104-collection-export-to-markdown)
    - [Story 10.5: AI-Suggested Tags](./epic-10-collections-organization.md#story-105-ai-suggested-tags)
    - [Story 10.6: Bulk Operations on Multiple Videos](./epic-10-collections-organization.md#story-106-bulk-operations-on-multiple-videos)
  - [Epic 11: Research Tools & Note-Taking](./epic-11-research-tools-note-taking.md)
    - [Story 11.1: Inline Note Editor for Videos](./epic-11-research-tools-note-taking.md#story-111-inline-note-editor-for-videos)
    - [Story 11.2: Timestamp-Anchored Notes](./epic-11-research-tools-note-taking.md#story-112-timestamp-anchored-notes)
    - [Story 11.3: Bidirectional Links Between Notes](./epic-11-research-tools-note-taking.md#story-113-bidirectional-links-between-notes)
    - [Story 11.4: Note Search & Filtering](./epic-11-research-tools-note-taking.md#story-114-note-search-filtering)
    - [Story 11.5: Note Export & Citation](./epic-11-research-tools-note-taking.md#story-115-note-export-citation)
    - [Story 11.6: Note Templates (Pro Feature)](./epic-11-research-tools-note-taking.md#story-116-note-templates-pro-feature)
  - [Epic 12: UGC Safeguards & Compliance Features](./epic-12-ugc-safeguards-compliance-features.md)
    - [Story 12.1: Report Content Action](./epic-12-ugc-safeguards-compliance-features.md#story-121-report-content-action)
    - [Story 12.2: Hide & Blacklist Channels](./epic-12-ugc-safeguards-compliance-features.md#story-122-hide-blacklist-channels)
    - [Story 12.3: Content Policy Page](./epic-12-ugc-safeguards-compliance-features.md#story-123-content-policy-page)
    - [Story 12.4: Support & Contact Information](./epic-12-ugc-safeguards-compliance-features.md#story-124-support-contact-information)
    - [Story 12.5: YouTube Disclaimers & Attributions](./epic-12-ugc-safeguards-compliance-features.md#story-125-youtube-disclaimers-attributions)
    - [Story 12.6: Compliance Audit Logging](./epic-12-ugc-safeguards-compliance-features.md#story-126-compliance-audit-logging)
  - [Epic 13: macOS System Integration](./epic-13-macos-system-integration.md)
    - [Story 13.1: Spotlight Indexing for Videos](./epic-13-macos-system-integration.md#story-131-spotlight-indexing-for-videos)
    - [Story 13.2: App Intents for Shortcuts](./epic-13-macos-system-integration.md#story-132-app-intents-for-shortcuts)
    - [Story 13.3: Menu Bar Mini-Controller](./epic-13-macos-system-integration.md#story-133-menu-bar-mini-controller)
    - [Story 13.4: Comprehensive Keyboard Shortcuts](./epic-13-macos-system-integration.md#story-134-comprehensive-keyboard-shortcuts)
    - [Story 13.5: Command Palette (âŒ˜K)](./epic-13-macos-system-integration.md#story-135-command-palette-k)
    - [Story 13.6: Drag-and-Drop from External Sources](./epic-13-macos-system-integration.md#story-136-drag-and-drop-from-external-sources)
  - [Epic 14: Accessibility & Polish](./epic-14-accessibility-polish.md)
    - [Story 14.1: VoiceOver Support for All UI Elements](./epic-14-accessibility-polish.md#story-141-voiceover-support-for-all-ui-elements)
    - [Story 14.2: Keyboard-Only Navigation](./epic-14-accessibility-polish.md#story-142-keyboard-only-navigation)
    - [Story 14.3: High-Contrast Theme](./epic-14-accessibility-polish.md#story-143-high-contrast-theme)
    - [Story 14.4: Loading States & Progress Indicators](./epic-14-accessibility-polish.md#story-144-loading-states-progress-indicators)
    - [Story 14.5: Empty States with Helpful Messaging](./epic-14-accessibility-polish.md#story-145-empty-states-with-helpful-messaging)
    - [Story 14.6: Smooth Animations & Transitions](./epic-14-accessibility-polish.md#story-146-smooth-animations-transitions)
  - [Epic 15: Monetization & App Store Release](./epic-15-monetization-app-store-release.md)
    - [Story 15.1: StoreKit 2 Configuration](./epic-15-monetization-app-store-release.md#story-151-storekit-2-configuration)
    - [Story 15.2: Paywall & Feature Gating](./epic-15-monetization-app-store-release.md#story-152-paywall-feature-gating)
    - [Story 15.3: Restore Purchase & Subscription Management](./epic-15-monetization-app-store-release.md#story-153-restore-purchase-subscription-management)
    - [Story 15.4: App Store Submission Package](./epic-15-monetization-app-store-release.md#story-154-app-store-submission-package)
    - [Story 15.5: Reviewer Documentation & Compliance Notes](./epic-15-monetization-app-store-release.md#story-155-reviewer-documentation-compliance-notes)
    - [Story 15.6: Notarized DMG Build for Alternate Distribution](./epic-15-monetization-app-store-release.md#story-156-notarized-dmg-build-for-alternate-distribution)
  - [Checklist Results Report](./checklist-results-report.md)
  - [Next Steps](./next-steps.md)
    - [UX Expert Prompt](./next-steps.md#ux-expert-prompt)
    - [Architect Prompt](./next-steps.md#architect-prompt)
